<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"zeinsshiri.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>


    <meta name="description" content="在何处付出，便在何处收获">
<meta property="og:type" content="website">
<meta property="og:title" content="Zeins&#39;s Blog">
<meta property="og:url" content="https://zeinsshiri.github.io/page/3/">
<meta property="og:site_name" content="Zeins&#39;s Blog">
<meta property="og:description" content="在何处付出，便在何处收获">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zeins_XvJin_Shiri">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zeinsshiri.github.io/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zeins's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/rss2.xml" title="Zeins's Blog" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zeins's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">笔记直接导入的，排版稍差，得有时间再处理</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zeins_XvJin_Shiri"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Zeins_XvJin_Shiri</p>
  <div class="site-description" itemprop="description">在何处付出，便在何处收获</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">134</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zeinsshiri/" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zeinsshiri&#x2F;" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:Rennai10000@outlook.com" title="E-Mail → mailto:Rennai10000@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Zeins_x_Shiri" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Zeins_x_Shiri" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml" rel="noopener me"><i class="rss fa-fw"></i>RSS</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E8%BF%90%E5%8A%A8%E6%A3%80%E6%B5%8B/%E8%BF%90%E5%8A%A8%E6%A3%80%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E8%BF%90%E5%8A%A8%E6%A3%80%E6%B5%8B/%E8%BF%90%E5%8A%A8%E6%A3%80%E6%B5%8B/" class="post-title-link" itemprop="url">运动检测</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:12:07" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">数字图像处理</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>0</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E9%87%91%E8%9E%8D/%E8%82%A1%E7%A5%A8%E6%8A%80%E6%9C%AF%E9%9D%A2%E5%88%86%E6%9E%90/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E9%87%91%E8%9E%8D/%E8%82%A1%E7%A5%A8%E6%8A%80%E6%9C%AF%E9%9D%A2%E5%88%86%E6%9E%90/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">股票交易技术面分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:47:45" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%87%91%E8%9E%8D/" itemprop="url" rel="index"><span itemprop="name">金融</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="单根K线"><a href="#单根K线" class="headerlink" title="单根K线"></a>单根K线</h1><p>包含市场价格&#x2F;指数在过去单位时间内走势的4个指标<br>1）上影线（最值）<br>2）下影线<br>3）开盘价&#x2F;指数<br>4）收盘价&#x2F;指数</p>
<h2 id="典型K线形态"><a href="#典型K线形态" class="headerlink" title="典型K线形态"></a>典型K线形态</h2><p>其本质是判断市场情绪<br>大阳线：影线很短，收盘价&gt;&gt;开盘价；反应买入力量强；过去单位时间内大概率处于上涨趋势<br>大阴线：收盘价&lt;&lt;开盘价;市场悲观，纷纷抛售；过去单位时间内大概率处于下跌趋势<br>锤子线：有一个较小实体；下影线很长，几乎没有上影线；过去单位时间内出现凹形拐点；有可能是市场回归理性的信号；有概率是某个时间段内买入的好时机（判断是否出现在下降趋势中增加概率）<br>射击之星：有一个较小实体；上影线很长，几乎没有下影线；过去单位时间内出现凸形拐点；有可能是市场回归理性的信号；有概率是某个时间段内卖出的好时机（判断是否出现在上升趋势中增加概率）<br>十字线：上下影线很长；收盘接近于开盘；反应市场买卖双方力量接近；有较大不确定性</p>
<p><img src="/image/image_SFfYoB7bo_.png"></p>
<p>大阳</p>
<p><img src="/image/image_Rf8ng17FWZ.png"></p>
<p>大阴</p>
<p><img src="/image/image_lmGxD5Vt8P.png"></p>
<p>锤子</p>
<p><img src="/image/image_MkZwo0Os8m.png"></p>
<p>射击之星</p>
<p><img src="/image/image_Nqocgi5Kg3.png"></p>
<p>十字线</p>
<p><img src="/image/image_kKoG4PS3o8.png"></p>
<h1 id="多根K线分析"><a href="#多根K线分析" class="headerlink" title="多根K线分析"></a>多根K线分析</h1><p>典型凹形拐点</p>
<p>1）低开高走：在下降趋势中，前一天还处于下降；后一天还没开盘时依然处于看空状态（开盘比前天收盘还低），但交易中却慢慢回升，收盘价超过前天降幅一半以上（若收盘&gt;前天开盘；完全补上前天跌幅；见底概率上升）；有概率是下降趋势的后期（近谷底），可适当买入<br>2）高开高走：在下降趋势中，前一天还处于下降；后一天还没开盘时却处于看多状态（开盘比前天收盘高），交易中价格回升，价格中位数超过收盘价超过前天开盘价；有概率是下降趋势的后期（近谷底），可考虑抄底吸纳</p>
<p><img src="/image/image_CzFeVHjxFQ.png"></p>
<p>低开高走</p>
<p><img src="/image/image_LgBSSWlBhK.png"></p>
<p>高开高走</p>
<p>典型凸形拐点</p>
<p>1）高开低走：在上升趋势中，前一天还处于上涨；后一天还没开盘就处于看涨状态（开盘比前天收盘高），但交易期间慢慢回落至低于前天涨幅一半以下（若收盘&lt;前天开盘；抹除了前天涨幅；见顶概率上升）；有概率是上涨趋势的尾声（见顶），市场看空；可清仓或减半<br>2）低开低走：在上升趋势中，前一天还处于上涨；后一天还没开盘就处于看空状态（开盘比前天收盘低），且价格中位数低于前天收盘价；有概率是上涨趋势的尾声（见顶），市场看空；可开始减仓</p>
<p><img src="/image/image_GwXB3uNZ8b.png"></p>
<p>高开低走</p>
<p><img src="/image/image_et3IITZtN-.png"></p>
<p>低开低走</p>
<h1 id="成交量"><a href="#成交量" class="headerlink" title="成交量"></a>成交量</h1><p>反应市场情绪和资金流入情况</p>
<p><img src="/image/image_rwvt3-IH7y.png"></p>
<p>缩量：<br>1）供过于求：有人卖没人买；市场保持观望态度<br>2）供不应求：有人买没人卖；多数看多<br>增量（具有欺骗性）：<br>1）有人买有人卖</p>
<h2 id="量价关系"><a href="#量价关系" class="headerlink" title="量价关系"></a>量价关系</h2><p>1）价涨量增：成本上升；却依然有上涨的需求⇒市场看多力量强；若为缺口式上涨,成本大幅却丝毫不影响需求侧，反应市场买方力量强劲，供不应求（真正看好价格持续上涨应该成交量下跌；但却出现更多次成交）</p>
<p><img src="/image/image_SjsiVPjbA_.png"></p>
<p>2）价跌量缩（平）：若是上升阶段，则表示不愿意卖出，还认为会上涨；市场保持观望态度</p>
<p><img src="/image/image_L_dLJqZRyb.png"></p>
<p>3）价跌量增：常出现于下跌中后期，市场投资者快速大量抛售；若是看好这只股票，那么这是捡便宜的好时机（熊市机会）</p>
<p><img src="/image/image_HrJQqG0Taq.png"></p>
<p>4）价涨量跌：若处于上升阶段；表示持股人认为股价会持续上涨，倾向继续持有，且买方加价；成交量下跌；属于正常现象；<br>若处于下跌阶段，反弹初期；市场供过于求表现为量缩，在此入场是好机会</p>
<p><img src="/image/image_PUwUGF86Mi.png"></p>
<p><img src="/image/image_RETOZ0ODs8.png"></p>
<p>均量线：周期时间内成交量的数学期望；反应周期单位时间的成交量波动水平（感觉是多余概念，不如直接看成交量）</p>
<h1 id="技术指标"><a href="#技术指标" class="headerlink" title="技术指标"></a>技术指标</h1><h2 id="趋势线"><a href="#趋势线" class="headerlink" title="趋势线"></a>趋势线</h2><p>阻力线（市场预期股价上界），支撑线（市场预期股价下界，碰到就反弹），其在过去某个周期时间内的斜率体现了一种市场共识；<br>1）双线斜率&gt;0：过去周期内市场情绪多数看多<br>2）双线&lt;0：过去周期内市场情绪多数看空<br>3）多次越过上个周期的趋势线；进入新周期，原有趋势被打破；（做多时跌破支撑线：考虑抛售，等待下一个趋势；）<br>3）双线交汇：原有趋势被打破，阻力线变成支撑线；支撑线变阻力线，考虑买入</p>
<h2 id="移动平均线Ema"><a href="#移动平均线Ema" class="headerlink" title="移动平均线Ema"></a>移动平均线Ema</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=bHY9XMRKWDA&t=517s" title="  https://www.youtube.com/watch?v=bHY9XMRKWDA&amp;t=517s">  https://www.youtube.com/watch?v=bHY9XMRKWDA&amp;t&#x3D;517s</a></p>
<p>单位周期时间内收盘价的加权平均值；相当于给金融资产价格的离散信号进行了平滑（均值）滤波；ema模板的权重应该是符合指数分布的；就是平滑了噪声的价格走势线</p>
<h2 id="RSI"><a href="#RSI" class="headerlink" title="RSI"></a>RSI</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/62868406" title=" RSI指标详解，解密它的致命缺陷 文章开始之前强烈推荐 专栏|我的交易系统最经典的系列文章： 1我的交易系统| 趋势研究的本质 2我的交易系统| 概率游戏 3我的交易系统| K线是规则的承载之量价时空分析法 4我的交易系统| 什么样的个股会长期上涨 5… https://zhuanlan.zhihu.com/p/62868406"> RSI指标详解，解密它的致命缺陷 文章开始之前强烈推荐 专栏|我的交易系统最经典的系列文章： 1我的交易系统| 趋势研究的本质 2我的交易系统| 概率游戏 3我的交易系统| K线是规则的承载之量价时空分析法 4我的交易系统| 什么样的个股会长期上涨 5… https://zhuanlan.zhihu.com/p/62868406</a></p>
<p>通过比较一段时间内的价格上涨幅度每单位净变化，来评估市场的多空力量和价格的强弱程度(供需强弱：过去单位净增幅变化1时的增幅强度)<br>RSI（N日） &#x3D; $100<em>\frac{N日内收盘涨幅均值}{N日内收盘涨跌幅均值的绝对值}$&#x3D;$100</em>\frac{1}{1+\frac{1}{RS}}$&#x3D;$100<em>\frac{RS}{1+RS}&#x3D;100</em>(1-\frac{1}{1+RS})$<br>当RSI&gt;70:需求&gt;供给：高位套现？加仓？<br>当RSI&lt;30：需求&lt;供给：抄底？止损？<br>背离：股价上升；需求减弱（逃顶？）；股价下降；需求上涨（可能要反弹？）<br>失效：单边趋势；即使这些震荡因素判断对了也无法阻止的总体价值走势</p>
<p><img src="/image/image_i3uOb5JQuY.png"></p>
<p><img src="/image/image_qQspW9Aik1.png"></p>
<p>macd</p>
<p>短期均线（趋势）与长期均线的残差DIF&#x3D;ema(c,12)-ema(c,26)；DEA&#x3D;DIF&#x2F;9消除了随机误差项，即短期趋势与长期趋势的真正差别；如果你假设长期趋势与短期趋势之间的随机误差实质是市场情绪因素造成的；<br>则BAR&#x3D;DIF-DEA即反应市场情绪：<br>BAR&gt;0：买方&gt;卖方;快线高过慢线的交叉点是买入时机<br>BAR&lt;0：卖方&gt;买方;慢线高过快线的交叉点前抛售</p>
<h2 id="vmacd"><a href="#vmacd" class="headerlink" title="vmacd"></a>vmacd</h2><p>kdj</p>
<p>RSV&#x3D;$\frac{收盘价 - N日最低价}{N日最高价 - N日最低价} * 100$；反映收盘价处于N日内价格波动区间的位置；判断收盘价处于N日内投资者预期价的相对位置（只能判断短期震荡趋势中的相对位置；进而判断超买超卖）<br>K&#x3D;$\frac{2}{3}\cdot$前一日K值+$\frac{1}{3}\cdot$当日RSV值 ;RSV与历史K值加权平均可以去噪，加权值是试出来的（短期震荡可能十分剧烈）<br>D&#x3D;$\frac{2}{3}\cdot$前一日D值+$\frac{1}{3}\cdot$当日K值；<br>J&#x3D;3K-2D</p>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E9%80%9A%E9%81%93%E5%8F%98%E6%8D%A2/%E9%80%9A%E9%81%93%E5%8F%98%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E9%80%9A%E9%81%93%E5%8F%98%E6%8D%A2/%E9%80%9A%E9%81%93%E5%8F%98%E6%8D%A2/" class="post-title-link" itemprop="url">通道变换</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:11:49" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">数字图像处理</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>像素点都是单独处理的，有利于用GPU加速优化；像素点(x,y)的模型都是n元排列：ex:（R,G,B）<br>像素点处理就是对n元排列各分量（颜色通道）进行变换$G(x,y) &#x3D; Trans(I(x,y))$</p>
<h1 id="图像反色1-x"><a href="#图像反色1-x" class="headerlink" title="图像反色1-x"></a>图像反色1-x</h1><p><img src="/image/image_uvS6eSVux3.png"></p>
<p><img src="/image/image_wv5SW6ToMk.png"></p>
<p><img src="/image/image_2cyheZ2pXW.png"></p>
<p><img src="/image/image__rOeyDeVVL.png"></p>
<p>步骤：<br>1）拿出像素各分量值uint8_t ，进行归一化映射<br>2）反色 变换：1.0-gray<br>3)归一化逆映射再存储</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 功能：进行单通道反色变换，对于RGB彩色颜色值，各个通道分别调用该函数</span></span><br><span class="line"><span class="comment">// 输入: nInputData : 单通道颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">// 返回: 变换后的颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Trans_Reverse</span><span class="params">(<span class="type">uint8_t</span> nInputData)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 归一化输入的颜色值  </span></span><br><span class="line">  <span class="type">double</span> fInData = (<span class="type">double</span>)nInputData / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 进行反色变换</span></span><br><span class="line">  <span class="type">double</span> fTransVal = <span class="number">1.0</span> - fInData;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 将变换后的值重新还原到 [0, 255] 区间</span></span><br><span class="line">  <span class="type">uint8_t</span> nRetVal = (<span class="type">uint8_t</span>)(fTransVal * <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nRetVal;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Trans_ReverseFast</span><span class="params">(<span class="type">uint8_t</span> nInputData)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 直接反色变换，这个计算最快</span></span><br><span class="line">  <span class="keyword">return</span> (<span class="number">255</span>-nInputData);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h1 id="对数变换-Alog-x-offset"><a href="#对数变换-Alog-x-offset" class="headerlink" title="对数变换$Alog(x-offset)$"></a>对数变换$Alog(x-offset)$</h1><p>对数函数特点：先快速增长（斜率&gt;1），再慢速增长(斜率&lt;1)<br>1）使较暗像素变亮，使较亮像素变暗<br>2）快速点亮较暗部分，缓慢点亮较暗部分（改变像素灰度分布，使像素更多分布在高灰度区域，可以将原本低灰度区域细节表现得更多一些）</p>
<p><img src="/image/image_9EAbjdZgAt.png"></p>
<p><img src="/image/image_kSo4QowQbI.png"></p>
<p><img src="/image/image_OBlC1PlPiQ.png"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 功能：进行单通道对数变换，对于RGB彩色颜色值，各个通道分别调用该函数</span></span><br><span class="line"><span class="comment">// 输入: nInputData : 单通道颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">// 返回: 变换后的颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Trans_Log</span><span class="params">(<span class="type">uint8_t</span> nInputData)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 归一化输入的颜色值  </span></span><br><span class="line">  <span class="type">double</span> fInData = (<span class="type">double</span>)nInputData / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 进行指数变换</span></span><br><span class="line">  <span class="type">double</span> fAmplitude = <span class="number">1.2</span>;   <span class="comment">// 幅度变换系数</span></span><br><span class="line">  <span class="type">double</span> fTransVal = fAmplitude * ln(fInData + <span class="number">1.0</span>);</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 将变换后的值重新还原到 [0, 255] 区间</span></span><br><span class="line">  fTransVal = MIN( MAX(<span class="number">0</span>, fTransVal ), <span class="number">1.0</span>);  <span class="comment">//筛出&gt;0部分，再筛出小于1部分</span></span><br><span class="line">  <span class="type">uint8_t</span> nRetVal = (<span class="type">uint8_t</span>)(fTransVal * <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nRetVal;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h1 id="指数（伽马）变换-Ax-gamma"><a href="#指数（伽马）变换-Ax-gamma" class="headerlink" title="指数（伽马）变换$Ax^\gamma$"></a>指数（伽马）变换$Ax^\gamma$</h1><p>γ&gt;1.0，变换后图像整体亮度变暗；较低灰度像素变多，较高灰度像素数量减少<br>γ&lt;1.0，变换后图像整体亮度变亮；较高灰度像素变多，较低灰度像素数量减少</p>
<p><img src="/image/image_RYme7FVS8q.png"></p>
<p>$Y &#x3D; X ^ {0.4}$</p>
<p><img src="/image/image_QIaN1hKrDy.png"></p>
<p>$Y &#x3D; X ^ {2.5}$</p>
<p><img src="/image/image_ZB9gt8PWAc.png"></p>
<p><img src="/image/image_ZzynetnwXN.png"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 功能：进行单通道指数变换，对于RGB彩色颜色值，各个通道分别调用该函数</span></span><br><span class="line"><span class="comment">// 输入: nInputData : 单通道颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">// 返回: 变换后的颜色值,值在[0, 255]</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Trans_Index</span><span class="params">(<span class="type">uint8_t</span> nInputData)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 归一化输入的颜色值  </span></span><br><span class="line">  <span class="type">double</span> fInData = (<span class="type">double</span>)nInputData / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 进行指数变换</span></span><br><span class="line">  <span class="type">double</span> fAmplitude = <span class="number">1.0</span>;   <span class="comment">// 幅度变换系数</span></span><br><span class="line">  <span class="type">double</span> fGama = <span class="number">0.4</span>;        <span class="comment">// 指数系数</span></span><br><span class="line">  <span class="type">double</span> fTransVal = fAmplitude * power(fInData, fGama);</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 将变换后的值重新还原到 [0, 255] 区间</span></span><br><span class="line">  fTransVal = MIN( MAX(<span class="number">0</span>, fTransVal ), <span class="number">1.0</span>);  </span><br><span class="line">  <span class="type">uint8_t</span> nRetVal = (<span class="type">uint8_t</span>)(fTransVal * <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nRetVal;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h1 id="分段线性变换-frac-1-1-e-A-x-offset"><a href="#分段线性变换-frac-1-1-e-A-x-offset" class="headerlink" title="分段线性变换$\frac{1}{1+e^{-A(x-offset)}}$"></a>分段线性变换$\frac{1}{1+e^{-A(x-offset)}}$</h1><p>Sigmoid函数$\frac{1}{1+e^{-t}}$;R→(0,1);其在0.5处中心对称；通过调节频率和相位使其有较好的2分性质；<br>使暗灰度区域更暗，亮灰度区域更亮，使整张图像亮&#x2F;暗两区域区别更明显。通常用于增加对比度调节$i_{max}-i_{min}$，</p>
<p><img src="/image/image_r4WXxASd9T.png"></p>
<p><img src="/image/image_38cNocURCA.png"></p>
<p><img src="/image/image_KKRidLm3Nm.png"></p>
<p><img src="/image/image_rWsrdZNmDA.png"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 功能：进行单通道Sigmoid变换，对于RGB彩色颜色值，各个通道分别调用该函数</span></span><br><span class="line"><span class="comment">// 输入: nInputData : 单通道颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">// 返回: 变换后的颜色值,值在[0, 255]</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Trans_Sigmoid</span><span class="params">(<span class="type">uint8_t</span> nInputData)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 归一化输入的颜色值  </span></span><br><span class="line">  <span class="type">double</span> fInData = (<span class="type">double</span>)nInputData / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 进行Sigmoid变换</span></span><br><span class="line">  <span class="type">double</span> fTransVal = <span class="number">1.0</span> / (<span class="number">1.0</span> + <span class="built_in">exp</span>(<span class="number">-10.0</span>*(fInData<span class="number">-0.5</span>)));</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 将变换后的值重新还原到 [0, 255] 区间</span></span><br><span class="line">  fTransVal = MIN( MAX(<span class="number">0</span>, fTransVal ), <span class="number">1.0</span>);  </span><br><span class="line">  <span class="type">uint8_t</span> nRetVal = (<span class="type">uint8_t</span>)(fTransVal * <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nRetVal;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h1 id="滤镜算法"><a href="#滤镜算法" class="headerlink" title="滤镜算法"></a>滤镜算法</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* @brief Filter function for RGB channel</span></span><br><span class="line"><span class="comment">* @param user_data   -- user data</span></span><br><span class="line"><span class="comment">* @param pxl_format  -- pixel format, in &amp; out have same pixel format</span></span><br><span class="line"><span class="comment">* @param pixel_bytes -- bytes of one pixel</span></span><br><span class="line"><span class="comment">* @param line_bytes  -- bytes of one line pixel</span></span><br><span class="line"><span class="comment">* @param in_pxl_data -- input RGB/RGBA/Gray data</span></span><br><span class="line"><span class="comment">* @param out_pxl_data-- output RGB/RGBA/Gray data</span></span><br><span class="line"><span class="comment">* @return None</span></span><br><span class="line"><span class="comment">* //1）检查输入图像的格式，2）遍历像素进行变换</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*PFN_FILTER)</span><span class="params">(<span class="comment">//定义指向返回值为void函数的指针PFN_FILTER，用于将函数作为参数传入</span></span></span></span><br><span class="line"><span class="params"><span class="function">              XVOID* user_data, </span></span></span><br><span class="line"><span class="params"><span class="function">              PXL_FORMAT pxl_format, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">int32_t</span> pixel_bytes, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">int32_t</span> line_bytes,</span></span></span><br><span class="line"><span class="params"><span class="function">              <span class="type">uint8_t</span>* in_pxl_data,</span></span></span><br><span class="line"><span class="params"><span class="function">              <span class="type">uint8_t</span>* out_pxl_data   )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 通道变换处理，将变换函数指针作为参数输入，应用层可以实现不同的变换函数</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="type">int32_t</span> <span class="title">XImage::Filter</span><span class="params">(PFN_FILTER fnFilter, <span class="type">void</span>* user_data, XImage&amp; out_img)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int32_t</span> i, j, ret;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fnFilter == <span class="literal">nullptr</span>)  &#123;</span><br><span class="line">    <span class="keyword">return</span> XERR_INVALID_PARAM;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!image_valid_)  &#123;</span><br><span class="line">    <span class="keyword">return</span> XERR_BAD_STATE;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">IsSameParameter</span>(out_img))</span><br><span class="line">  &#123;</span><br><span class="line">    out_img.<span class="built_in">Release</span>( );</span><br><span class="line">    ret = out_img.<span class="built_in">Allocate</span>(pxl_format_, width_, height_);</span><br><span class="line">    <span class="built_in">XASSERT</span>(ret == XOK);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">uint8_t</span>* src_line = image_data_;</span><br><span class="line">  <span class="type">uint8_t</span>* dst_line = out_img.image_data_;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; height_; i++)  </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="type">uint8_t</span>* src_data = src_line;</span><br><span class="line">    <span class="type">uint8_t</span>* dst_data = dst_line;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; width_; j++)</span><br><span class="line">    &#123;</span><br><span class="line">      (fnFilter)(user_data, pxl_format_, pixel_bytes_, line_bytes_, src_data, dst_data);<span class="comment">//还能通过指针调用函数。。。</span></span><br><span class="line">                               </span><br><span class="line">      src_data += pixel_bytes_;</span><br><span class="line">      dst_data += out_img.pixel_bytes_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    src_line += line_bytes_;</span><br><span class="line">    dst_line += out_img.line_bytes_;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> XOK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1、反色变换函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 反色变换处理</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">XImageFilterReserve</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  XVOID* user_data, </span></span></span><br><span class="line"><span class="params"><span class="function">  PXL_FORMAT pxl_format, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">int32_t</span> pixel_bytes, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">int32_t</span> line_bytes,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">uint8_t</span>* in_pxl_data, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">uint8_t</span>* out_pxl_data    )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (pixel_bytes == <span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    out_pxl_data[<span class="number">0</span>] = <span class="number">255</span> - in_pxl_data[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (pixel_bytes == <span class="number">3</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    out_pxl_data[<span class="number">0</span>] = <span class="number">255</span> - in_pxl_data[<span class="number">0</span>];</span><br><span class="line">    out_pxl_data[<span class="number">1</span>] = <span class="number">255</span> - in_pxl_data[<span class="number">1</span>];</span><br><span class="line">    out_pxl_data[<span class="number">2</span>] = <span class="number">255</span> - in_pxl_data[<span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">XImage  org_img, reverse_img;</span><br><span class="line">org_img.<span class="built_in">LoadFromBmp</span>(<span class="string">&quot;e:/24bit.bmp&quot;</span>);</span><br><span class="line">org_img.<span class="built_in">Filter</span>(XImageFilterReserve, <span class="literal">nullptr</span>, reverse_img);<span class="comment">//函数名是指针。。。</span></span><br><span class="line">reverse_img.<span class="built_in">SaveToBmp</span>(<span class="string">&quot;e:/reverse.bmp&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>2、指数变换：<br>指数变换通常比较适合用于灰度图，而对于RGB24位色虽然也可以使用指数变换，但是容易导致失真，在调整对比度我们通常会采用其他的算法来进行处理。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">XImageFilterLog</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  XVOID* user_data, </span></span></span><br><span class="line"><span class="params"><span class="function">  PXL_FORMAT pxl_format, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">int32_t</span> pixel_bytes, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">int32_t</span> line_bytes,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">uint8_t</span>* in_pxl_data, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">uint8_t</span>* out_pxl_data    )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (pixel_bytes == <span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// 归一化输入的颜色值  </span></span><br><span class="line">    <span class="type">double</span> normal_data = (<span class="type">double</span>)(in_pxl_data[<span class="number">0</span>]) / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 进行指数变换</span></span><br><span class="line">    <span class="type">double</span> amplitude = <span class="number">1.5</span>;   <span class="comment">// 幅度变换系数</span></span><br><span class="line">    <span class="type">double</span> log_data = amplitude * <span class="built_in">log</span>(normal_data + <span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">if</span> (log_data &lt; <span class="number">0</span>)  log_data = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (log_data &gt; <span class="number">1.0f</span>) log_data = <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">    out_pxl_data[<span class="number">0</span>] = (<span class="type">uint8_t</span>)(log_data * <span class="number">255</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (pixel_bytes == <span class="number">3</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="type">double</span> normal_r = (<span class="type">double</span>)(in_pxl_data[<span class="number">0</span>]) / <span class="number">255.0</span>;</span><br><span class="line">    <span class="type">double</span> normal_g = (<span class="type">double</span>)(in_pxl_data[<span class="number">1</span>]) / <span class="number">255.0</span>;</span><br><span class="line">    <span class="type">double</span> normal_b = (<span class="type">double</span>)(in_pxl_data[<span class="number">2</span>]) / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> amplitude = <span class="number">1.5</span>;   <span class="comment">// 幅度变换系数</span></span><br><span class="line">    <span class="type">double</span> log_r = amplitude * <span class="built_in">log</span>(normal_r + <span class="number">1.0</span>);</span><br><span class="line">    <span class="type">double</span> log_g = amplitude * <span class="built_in">log</span>(normal_g + <span class="number">1.0</span>);</span><br><span class="line">    <span class="type">double</span> log_b = amplitude * <span class="built_in">log</span>(normal_b + <span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">if</span> (normal_r &lt; <span class="number">0</span>)  normal_r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (normal_r &gt; <span class="number">1.0f</span>) normal_r = <span class="number">1.0f</span>;</span><br><span class="line">    <span class="keyword">if</span> (normal_g &lt; <span class="number">0</span>)  normal_g = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (normal_g &gt; <span class="number">1.0f</span>) normal_g = <span class="number">1.0f</span>;</span><br><span class="line">    <span class="keyword">if</span> (normal_b &lt; <span class="number">0</span>)  normal_b = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (normal_b &gt; <span class="number">1.0f</span>) normal_b = <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">    out_pxl_data[<span class="number">0</span>] = (<span class="type">uint8_t</span>)(log_r * <span class="number">255</span>);</span><br><span class="line">    out_pxl_data[<span class="number">1</span>] = (<span class="type">uint8_t</span>)(log_g * <span class="number">255</span>);</span><br><span class="line">    out_pxl_data[<span class="number">2</span>] = (<span class="type">uint8_t</span>)(log_b * <span class="number">255</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">XImage  org_img, gray_img, log_img;</span><br><span class="line">org_img.<span class="built_in">LoadFromBmp</span>(<span class="string">&quot;e:/24bit.bmp&quot;</span>);</span><br><span class="line">org_img.<span class="built_in">Convert</span>(PXL_FORMAT_8BIT_GRAY, gray_img);</span><br><span class="line">gray_img.<span class="built_in">Filter</span>(XImageFilterLog, <span class="literal">nullptr</span>, log_img);</span><br><span class="line">log_img.<span class="built_in">SaveToBmp</span>(<span class="string">&quot;e:/log.bmp&quot;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h1><p>通道变换时，浮点计算会比较耗时，考虑到每个通道像素值∈[0, 255]，且每个像素是独立变换，因此可空间换时间，把0~255所有的变换值先计算出来，然后在像素遍历的时候就直接查询计算好的结果O(1).这种方法几乎适合所有的通道变换算法，我们称之为<strong>查表法</strong>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 预先计算好的数据 存放到 log_tab 数组表中</span></span><br><span class="line"><span class="type">uint8_t</span> log_tab[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">XImageFilterLog</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  XVOID* user_data, </span></span></span><br><span class="line"><span class="params"><span class="function">  PXL_FORMAT pxl_format, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">int32_t</span> pixel_bytes, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">int32_t</span> line_bytes,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">uint8_t</span>* in_pxl_data, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="type">uint8_t</span>* out_pxl_data    )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (pixel_bytes == <span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    out_pxl_data[<span class="number">0</span>] = log_tab[in_pxl_data[<span class="number">0</span>]];  <span class="comment">// 直接查询表方式,性能快很多</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (pixel_bytes == <span class="number">3</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    out_pxl_data[<span class="number">0</span>] = log_tab[in_pxl_data[<span class="number">0</span>]];</span><br><span class="line">    out_pxl_data[<span class="number">1</span>] = log_tab[in_pxl_data[<span class="number">1</span>]];</span><br><span class="line">    out_pxl_data[<span class="number">2</span>] = log_tab[in_pxl_data[<span class="number">2</span>]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 预先进行指数变换计算,结果存放到表格中</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 归一化输入的颜色值  </span></span><br><span class="line">    <span class="type">double</span> normal_data = (<span class="type">double</span>)(i) / <span class="number">255.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 进行指数变换</span></span><br><span class="line">    <span class="type">double</span> amplitude = <span class="number">1.5</span>;   <span class="comment">// 幅度变换系数</span></span><br><span class="line">    <span class="type">double</span> log_data = amplitude * <span class="built_in">log</span>(normal_data + <span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">if</span> (log_data &lt; <span class="number">0</span>)  log_data = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (log_data &gt; <span class="number">1.0f</span>) log_data = <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">    log_tab[i] = (<span class="type">uint8_t</span>)(log_data * <span class="number">255</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">XImage  org_img, gray_img, log_img;</span><br><span class="line">org_img.<span class="built_in">LoadFromBmp</span>(<span class="string">&quot;e:/24bit.bmp&quot;</span>);</span><br><span class="line">org_img.<span class="built_in">Convert</span>(PXL_FORMAT_8BIT_GRAY, gray_img);</span><br><span class="line">gray_img.<span class="built_in">Filter</span>(XImageFilterLog, <span class="literal">nullptr</span>, log_img);</span><br><span class="line">log_img.<span class="built_in">SaveToBmp</span>(<span class="string">&quot;e:/log.bmp&quot;</span>);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2/%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2/%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2/" class="post-title-link" itemprop="url">阈值分割</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:12:01" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">数字图像处理</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>245</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="二值分割"><a href="#二值分割" class="headerlink" title="二值分割"></a><strong>二值分割</strong></h2><p>适合背景简单的图像内容，如绿幕抠图等简单的前后景分离</p>
<p><img src="/image/image_WeKxaO1Pa_.png"></p>
<p>当像素点的RGB与背景绿色值 (0x00, 0x00, 0xFF) 间的差距小于一定阈值，则判断该像素点为背景像素，否则为前景像素<br>$\sqrt((r-r_{back})^2+(g-g_{back})^2+(b-b_{back})^2)$&lt;阈值⇒背景<br>在实际工程化开发中，可以将 sqrt() 开平方计算拿掉，直接调大阈值范围，这样可以大大加快计算性能</p>
<h2 id="分水岭算法"><a href="#分水岭算法" class="headerlink" title="分水岭算法"></a>分水岭算法</h2><p>很多时候前后景像素的色彩差异值没有这么大，此时就需要对图像内容本身做分割处理</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E9%A2%91%E5%9F%9F%E6%BB%A4%E6%B3%A2%E5%99%A8%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F/%E9%A2%91%E5%9F%9F%E6%BB%A4%E6%B3%A2%E5%99%A8%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E9%A2%91%E5%9F%9F%E6%BB%A4%E6%B3%A2%E5%99%A8%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F/%E9%A2%91%E5%9F%9F%E6%BB%A4%E6%B3%A2%E5%99%A8%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F/" class="post-title-link" itemprop="url">频域滤波器？？？？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:11:45" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">数字图像处理</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>157</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/374642386" title=" 图像算法原理与实践——图像增强之 频率域处理 本章重点讲解在频域范围内的滤波，主要是在傅里叶变换的频域内进行滤波等处理。 一、图像傅里叶频域变换 关于图像的二维傅里叶变换，已经有很多非常详细的资料说明了，本章节不再做细节说明，直接上代码。参考 下… https://zhuanlan.zhihu.com/p/374642386"> 图像算法原理与实践——图像增强之 频率域处理 本章重点讲解在频域范围内的滤波，主要是在傅里叶变换的频域内进行滤波等处理。 一、图像傅里叶频域变换 关于图像的二维傅里叶变换，已经有很多非常详细的资料说明了，本章节不再做细节说明，直接上代码。参考 下… https://zhuanlan.zhihu.com/p/374642386</a></p>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E8%BD%AF%E4%BB%B6/GNU%20binutils/GNU%20binutils/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E8%BD%AF%E4%BB%B6/GNU%20binutils/GNU%20binutils/" class="post-title-link" itemprop="url">GNU binutils</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:17:18" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="cpp预处理器"><a href="#cpp预处理器" class="headerlink" title="cpp预处理器"></a>cpp预处理器</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cpp hello.c &gt; hello.i</span><br><span class="line">more helli.i</span><br><span class="line"><span class="comment">#宏展开、条件编译、包含其他文件等操作</span></span><br><span class="line"></span><br><span class="line">gcc -Wall -S hello.i -o hello.s</span><br><span class="line">more hello.s</span><br><span class="line"><span class="comment">#转换成汇编语言</span></span><br></pre></td></tr></table></figure>

<h1 id="as汇编器"><a href="#as汇编器" class="headerlink" title="as汇编器"></a>as汇编器</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">as hello.s -o hello.o</span><br><span class="line">file hello.o</span><br><span class="line"><span class="comment">#将汇编语言代码转换为机器码指令，生成目标文件；file查看文件类型</span></span><br></pre></td></tr></table></figure>

<h1 id="ld-链接器"><a href="#ld-链接器" class="headerlink" title="ld 链接器"></a>ld 链接器</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -v hello.o</span><br><span class="line">或ld -o output input1.o input2.o</span><br><span class="line"><span class="comment">#将目标文件和库文件链接生成可执行文件或共享库；因可执行文件通常需要外部函数</span></span><br></pre></td></tr></table></figure>

<h1 id="readelf读取-分析ELF格式文件工具"><a href="#readelf读取-分析ELF格式文件工具" class="headerlink" title="readelf读取&#x2F;分析ELF格式文件工具"></a>readelf读取&#x2F;分析ELF格式文件工具</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">readelf -h ./hello.o</span><br><span class="line"><span class="comment">#查看ELF文件头</span></span><br><span class="line">ldd ./hello</span><br><span class="line"><span class="comment">#查看hello依赖的动态库</span></span><br><span class="line"></span><br><span class="line">readelf -S</span><br><span class="line"><span class="comment">#查看段属性</span></span><br><span class="line"></span><br><span class="line">readelf -s </span><br><span class="line"><span class="comment">#查看符号表</span></span><br><span class="line"></span><br><span class="line">readelf -x .rodata a.out</span><br><span class="line"><span class="comment">#查看ELF文件数据块中的只读数据；这类用于查看磁盘地址所存内容</span></span><br></pre></td></tr></table></figure>

<h1 id="size列出-o-out各节大小和全部大小"><a href="#size列出-o-out各节大小和全部大小" class="headerlink" title="size列出.o&#x2F;.out各节大小和全部大小"></a>size列出.o&#x2F;.out各节大小和全部大小</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">size hello.o</span><br><span class="line"><span class="comment">#text 节：二进制文件代码部分，包含所有可执行指令。</span></span><br><span class="line"><span class="comment">#data 节：所有初始化数据所在的位置</span></span><br><span class="line"><span class="comment">#bss 节：未初始化数据的存储位置。</span></span><br><span class="line"><span class="comment">#在静态的映像文件中，各个部分称之为 节(section)，而在运行时的各个部分称之为 段(segment)</span></span><br></pre></td></tr></table></figure>

<h1 id="strings打印文件中的可打印字符串"><a href="#strings打印文件中的可打印字符串" class="headerlink" title="strings打印文件中的可打印字符串"></a>strings打印文件中的可打印字符串</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strings -d hello.o</span><br><span class="line"><span class="comment">#（可执行文件）上运行 strings 会显示在链接阶段该二进制文件中包含的其他信息</span></span><br></pre></td></tr></table></figure>

<h1 id="objdump显示目标文件信息"><a href="#objdump显示目标文件信息" class="headerlink" title="objdump显示目标文件信息"></a>objdump显示目标文件信息</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">objdump -d hello.o</span><br><span class="line"><span class="comment">#反汇编输出.text</span></span><br><span class="line">objdump -d hello.out | grep -A 9 main:&gt;</span><br><span class="line"><span class="comment">#从数据流中抓取main 函数</span></span><br><span class="line"></span><br><span class="line">objdump -h </span><br><span class="line"><span class="comment">#查看段属性</span></span><br><span class="line"></span><br><span class="line">objdump -s</span><br><span class="line"><span class="comment">#将所有段的内容以十六进制打印出来</span></span><br><span class="line"></span><br><span class="line">objdump -r</span><br><span class="line"><span class="comment">#查看重定位段</span></span><br></pre></td></tr></table></figure>

<h1 id="strip从目标文件中剥离符号-调试信息"><a href="#strip从目标文件中剥离符号-调试信息" class="headerlink" title="strip从目标文件中剥离符号(调试信息)"></a>strip从目标文件中剥离符号(调试信息)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file a.out<span class="comment">#查看文件类型：是否被剥离</span></span><br><span class="line"><span class="built_in">du</span> -h a.out<span class="comment">#查看二进制文件大小</span></span><br><span class="line">strip a.out<span class="comment">#发布版本剥离调试信息，瘦身</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="addr2line根据地址映射到文件名和行号"><a href="#addr2line根据地址映射到文件名和行号" class="headerlink" title="addr2line根据地址映射到文件名和行号"></a>addr2line根据地址映射到文件名和行号</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">objdump -d a.out | grep -A 2 -E <span class="string">&#x27;main&gt;:|function1&gt;:|function2&gt;:&#x27;</span></span><br><span class="line"><span class="comment">#找出汇编代码中的函数标签行；以及标签行对应地址</span></span><br><span class="line">addr2line -e a.out 40051d</span><br><span class="line"><span class="comment">#标签行地址对应的C源码和行号</span></span><br></pre></td></tr></table></figure>

<h1 id="nm列出目标文件的符号"><a href="#nm列出目标文件的符号" class="headerlink" title="nm列出目标文件的符号"></a>nm列出目标文件的符号</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nm a.out | grep -Ei <span class="string">&#x27;function|main|globalvar&#x27;</span><span class="comment">#获取有关函数和变量的信息</span></span><br><span class="line">&gt;&gt;&gt;000000000040051d T function1</span><br><span class="line">&gt;&gt;&gt;0000000000400532 T function2</span><br><span class="line">&gt;&gt;&gt;000000000060102c D globalvar</span><br><span class="line">&gt;&gt;&gt;U __libc_start_main@@GLIBC_2.2.5</span><br><span class="line">&gt;&gt;&gt;0000000000400547 T main</span><br><span class="line"><span class="comment">#函数被标记为 T，它表示 text 节中的符号，而变量标记为 D，表示初始化的 data 节中的符号</span></span><br><span class="line"><span class="comment">#在未剥离符号的没有源代码的二进制文件上运行此命令可窥视内部并了解使用了哪些函数和变量</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E8%BD%AF%E4%BB%B6/makefile/makefile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E8%BD%AF%E4%BB%B6/makefile/makefile/" class="post-title-link" itemprop="url">makefile</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:16:12" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>C&#x2F;C++等项目中，make工具可进行自动化构建（依据makefile脚本定义的编译规则和依赖关系）</p>
<h1 id="编译规则"><a href="#编译规则" class="headerlink" title="编译规则"></a>编译规则</h1><p>command执行的规则：<br>1）依赖文件晚于目标文件（依赖更新）<br>2）目标文件不存在<br>3）依赖树自底向上执行</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">生成目标:依赖（生成目标所需文件）</span></span><br><span class="line">（tab）依赖文件生成目标的命令</span><br><span class="line"></span><br><span class="line">target ... : prerequisites ...</span><br><span class="line">    command</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="comment">#prerequisites中如果有一个以上的文件比target文件要新的话，command所定义的命令就会被执行。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="make-cmd"><a href="#make-cmd" class="headerlink" title="make_cmd"></a>make_cmd</h1><p>执行 make 时，查找“Makefile”，并根据它的指示执行操作，生成第一个目标。<br>“-f”选项指定文件，不再使用名为“Makefile”的文件；<br>“-C”选项指定目录，切换到其他目录里去;<br>可指定目标，不再默认生成第一个目标：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">make -f Makefile.build </span><br><span class="line"></span><br><span class="line">make -C a/ -f Makefile.build </span><br><span class="line"></span><br><span class="line">make -C a/ -f Makefile.build other_target</span><br></pre></td></tr></table></figure>

<h1 id="自定义make-cmd"><a href="#自定义make-cmd" class="headerlink" title="自定义make_cmd"></a>自定义make_cmd</h1><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#自定义make_cmd</span></span><br><span class="line">伪目标：</span><br><span class="line">  shell_cmd</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 伪目标 和 Makefile 同级目录下 文件/文件夹 重名时make_cmd不会执行；故要用.PHONY显式表示伪目标，定义的是make_cmd而非编译规则</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">  -rm -f hello</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="makefile文件语法"><a href="#makefile文件语法" class="headerlink" title="makefile文件语法"></a>makefile文件语法</h1><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>可理解为变量是字符串流的宏定义</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#常见变量</span></span><br><span class="line">BUILD_DIR = build                                          <span class="comment"># 目标文件夹</span></span><br><span class="line">SRC_DIRS = <span class="variable">$(<span class="built_in">shell</span> pwd)</span>/src                                <span class="comment"># 源文件夹</span></span><br><span class="line">INCLUDE := <span class="variable">$(<span class="built_in">shell</span> pwd)</span>/inc                                <span class="comment"># 头文件夹</span></span><br><span class="line"></span><br><span class="line">CROSS_COMPILE =                                            <span class="comment"># 交叉编译工具头,如：arm-linux-gnueabihf-</span></span><br><span class="line">CC = gcc                                                   <span class="comment"># 编译器设置</span></span><br><span class="line">CFLAGS = -lmath -L ./lib -I <span class="variable">$(INCLUDE)</span> -g -Wall -Wextra -O0     <span class="comment">#-Wextra更多警告</span></span><br><span class="line">SRCS = <span class="variable">$(<span class="built_in">shell</span> find <span class="variable">$(SRC_DIRS)</span> -name &#x27;*.c&#x27;)</span>               <span class="comment"># 根据源文件夹查找所有源文件</span></span><br><span class="line">OBJS = <span class="variable">$(<span class="built_in">patsubst</span> %.c, <span class="variable">$(BUILD_DIR)</span>/%.o, <span class="variable">$(SRCS)</span>)</span></span><br><span class="line">TARGET = myprogram                                         <span class="comment"># 目标文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#预设变量（用于cmd）</span></span><br><span class="line"><span class="variable">$@</span>                               <span class="comment">#生成目标(target)</span></span><br><span class="line"><span class="variable">$&lt;</span>                               <span class="comment">#第一个依赖文件（prerequisties）</span></span><br><span class="line"><span class="variable">$^</span>                               <span class="comment">#所有依赖文件（依赖的字符串流），以空格分开，不包含重复的依赖文件</span></span><br><span class="line">%.o                               <span class="comment">#通配符；对上一规则依赖项的迭代器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">hello:a.o b.o</span></span><br><span class="line">  gcc -o hello <span class="variable">$^</span></span><br><span class="line"></span><br><span class="line"><span class="section">%.o:%.c</span></span><br><span class="line">  gcc -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Operator"><a href="#Operator" class="headerlink" title="Operator"></a>Operator</h2><p>:&#x3D;              执行make规则时赋值<br>A&#x3D;$(B)               得到B的最终值<br>A?&#x3D;               若前面已经定义A,则不覆盖前面的赋值<br>+&#x3D;            附加<br>$(X):取X变量的值<br>@+shell命令：执行make时显示执行结果而不显示执行了这条命令的记录<br>all:执行make时，若没指定目标，则执行all下的默认指令或生成其右边的默认生成目标</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">all：a</span><br><span class="line"></span><br><span class="line"><span class="section">a: a.c</span></span><br><span class="line">  gcc -o a a.c</span><br><span class="line">  _______________________________________________</span><br><span class="line">A:=123</span><br><span class="line"><span class="section">all:</span></span><br><span class="line">  @echo $A</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="函数-fun-arg-…"><a href="#函数-fun-arg-…" class="headerlink" title="函数$(fun arg,…)"></a>函数$(fun arg,…)</h2><p>$(wildcard 格式)                               &#x20;</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">src = <span class="variable">$(<span class="built_in">wildcard</span> *.c)</span>                              <span class="comment">#找到当前目录下所有后缀为.c的文件,生成文件名.c流赋值给src</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>$$\text{$ (patsubst 格式1的字符,格式2的字符,字符串流 )}$$</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj = <span class="variable">$(<span class="built_in">patsubst</span> %.c,%.o, <span class="variable">$(src)</span>)</span>                                  <span class="comment">#把字符串流中的.c文件替换成.o</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>$(foreach 变量a,字符串流,对a的引用进行的运算):遍历字符串流放入变量a;并执行运算，生成运算后的字符串流</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A:= a.o b.o</span><br><span class="line">dep_files := <span class="variable">$(<span class="built_in">foreach</span> f, <span class="variable">$(A)</span>, .<span class="variable">$(f)</span>.d)</span>                          <span class="comment"># 最终 dep_files := .a.o.d .b.o.d</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

$$\begin{array}{ll}\text{\$(filter}&\text{\%/,}&\text{\$(C))}\\\text{\$(filter-out}&\text{ \%/,}&\text{\$(C))}\end{array}$$;筛出/排除C中符合%/格式的值

<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C =a b c d/</span><br><span class="line">D=<span class="variable">$(<span class="built_in">filter</span> %/,<span class="variable">$(C)</span>)</span></span><br><span class="line">E=<span class="variable">$(<span class="built_in">filter</span>-out %/,<span class="variable">$(C)</span>)</span></span><br></pre></td></tr></table></figure>

<h1 id="自动生成依赖"><a href="#自动生成依赖" class="headerlink" title="自动生成依赖"></a>自动生成依赖</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc -M c.c//打印出生成c.o的依赖</span><br><span class="line">gcc -M -MF c.d c.c//把依赖写入c.d</span><br><span class="line"></span><br><span class="line">gcc -c -o c.o c.c -MD -MF c.d//编译c.o;把依赖写入c.d</span><br></pre></td></tr></table></figure>

<h1 id="makefile模板？天书"><a href="#makefile模板？天书" class="headerlink" title="makefile模板？天书"></a>makefile模板？天书</h1><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">objs := main.o sub.o</span><br><span class="line">test : <span class="variable">$(objs)</span></span><br><span class="line">  gcc -o test <span class="variable">$^</span></span><br><span class="line"></span><br><span class="line">CFLAGS = -werror -I ./inc -Lname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成.o文件的依赖文件列表，并列出其中存在的</span></span><br><span class="line"><span class="comment"># .main.o.d .sub.o.d</span></span><br><span class="line">dep_files := <span class="variable">$(<span class="built_in">foreach</span> f, <span class="variable">$(objs)</span>, .<span class="variable">$(f)</span>.d)</span></span><br><span class="line">dep_files := <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(dep_files)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 已存在依赖列表不为空，包含进来</span></span><br><span class="line"><span class="keyword">ifneq</span> (<span class="variable">$(dep_files)</span>,)</span><br><span class="line">  <span class="keyword">include</span> <span class="variable">$(dep_files)</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">%.o : %.c</span><br><span class="line">  gcc <span class="variable">$(CFLAGS)</span> -Wp,-MD,.<span class="variable">$@</span>.d -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#删除.o,可执行</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">  rm *.o test -f</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除.o,可执行,依赖</span></span><br><span class="line"><span class="section">distclean:</span></span><br><span class="line">  rm <span class="variable">$(dep_files)</span> *.o test -f</span><br><span class="line">  </span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:clean</span></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:disclean</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>大型项目makefile:<br>参数：<br>1)支持多个目录、多层目录、多个文件；<br>2)支持给所有文件设置编译选项；<br>3)支持给目录设置编译选项；<br>4)支持给某个文件单独设置编译选项；<br>设计：<br>1)Makefile文件确定要编译的当前目录文件和子目录<br>2)Makefile.build文件包含规则<br>3)每个需要编译的子目录都放个Makefile文件，把需要编译的文件编译成<strong>built-in.o</strong><br>4)再把所有子目录的<strong>built-in.o</strong>链接到顶层的<strong>built-in.o</strong><br>5)最后把顶层<strong>built-in.o</strong>链接到<strong>APP****生成可执行文件</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">CROSS_COMPILE = <span class="comment"># 交叉编译工具头,如：arm-linux-gnueabihf-</span></span><br><span class="line">AS      = <span class="variable">$(CROSS_COMPILE)</span>as <span class="comment"># 把汇编文件生成目标文件</span></span><br><span class="line">LD      = <span class="variable">$(CROSS_COMPILE)</span>ld <span class="comment"># 链接器，为前面生成的目标代码分配地址空间，将多个目标文件链接成一个库或者一个可执行文件</span></span><br><span class="line">CC      = <span class="variable">$(CROSS_COMPILE)</span>gcc <span class="comment"># 编译器，对 C 源文件进行编译处理，生成汇编文件</span></span><br><span class="line">CPP    = <span class="variable">$(CC)</span> -E</span><br><span class="line">AR      = <span class="variable">$(CROSS_COMPILE)</span>ar <span class="comment"># 打包器，用于库操作，可以通过该工具从一个库中删除或则增加目标代码模块</span></span><br><span class="line">NM     = <span class="variable">$(CROSS_COMPILE)</span>nm <span class="comment"># 查看静态库文件中的符号表</span></span><br><span class="line"></span><br><span class="line">STRIP       = <span class="variable">$(CROSS_COMPILE)</span>strip <span class="comment"># 以最终生成的可执行文件或者库文件作为输入，然后消除掉其中的源码</span></span><br><span class="line">OBJCOPY  = <span class="variable">$(CROSS_COMPILE)</span>objcopy <span class="comment"># 复制一个目标文件的内容到另一个文件中，可用于不同源文件之间的格式转换</span></span><br><span class="line">OBJDUMP = <span class="variable">$(CROSS_COMPILE)</span>objdump <span class="comment"># 查看静态库或则动态库的签名方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 共享到sub-Makefile</span></span><br><span class="line"><span class="keyword">export</span> AS LD CC CPP AR NM</span><br><span class="line"><span class="keyword">export</span> STRIP OBJCOPY OBJDUMP</span><br><span class="line"></span><br><span class="line"><span class="comment">#compile and lib parameter</span></span><br><span class="line"><span class="comment">#编译参数</span></span><br><span class="line"><span class="comment"># -Wall ： 允许发出 GCC 提供的所有有用的报警信息</span></span><br><span class="line"><span class="comment"># -O2 : “-On”优化等级</span></span><br><span class="line"><span class="comment"># -g : 在可执行程序中包含标准调试信息</span></span><br><span class="line"><span class="comment"># -I : 指定头文件路径（可多个）</span></span><br><span class="line"><span class="comment"># LDFLAGS库路径</span></span><br><span class="line"><span class="comment">#CC      := gcc</span></span><br><span class="line">LIBS    :=</span><br><span class="line">LDFLAGS := -L <span class="variable">$(<span class="built_in">shell</span> pwd)</span>/lib</span><br><span class="line">DEFINES := </span><br><span class="line">INCLUDE := -I <span class="variable">$(<span class="built_in">shell</span> pwd)</span>/<span class="keyword">include</span></span><br><span class="line">CFLAGS  := -g -Wall -O2 -g <span class="variable">$(DEFINES)</span> <span class="variable">$(INCLUDE)</span></span><br><span class="line">CXXFLAGS:= <span class="variable">$(CFLAGS)</span> -DHAVE_CONFIG_H</span><br><span class="line"></span><br><span class="line"><span class="comment"># 共享到sub-Makefile</span></span><br><span class="line"><span class="keyword">export</span> CFLAGS LDFLAGS</span><br><span class="line"></span><br><span class="line"><span class="comment"># 顶层路径</span></span><br><span class="line">TOPDIR := <span class="variable">$(<span class="built_in">shell</span> pwd)</span></span><br><span class="line"><span class="keyword">export</span> TOPDIR</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最终目标</span></span><br><span class="line">TARGET := test</span><br><span class="line"></span><br><span class="line"><span class="comment">#自动找把当前目录下所有.c和.cpp文件，并将目标定义为同名.o文件</span></span><br><span class="line">SOURCE  := <span class="variable">$(<span class="built_in">wildcard</span> *.c)</span> <span class="variable">$(<span class="built_in">wildcard</span> *.cpp)</span></span><br><span class="line">OBJS    := <span class="variable">$(<span class="built_in">patsubst</span> %.c,%.o,$(<span class="built_in">patsubst</span> %.cpp,%.o,<span class="variable">$(SOURCE)</span>)</span>)</span><br><span class="line">OBJS += subdir/ <span class="comment"># 需要进入 subdir 这个子目录去寻找文件来编进程序里，具体是哪些文件，由 subdir 目录下的 Makefile 决定。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一个目标</span></span><br><span class="line">all : start_recursive_build <span class="variable">$(TARGET)</span></span><br><span class="line">    @echo <span class="variable">$(TARGET)</span> has been built !</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 处理第一个依赖，**转到 Makefile.build 执行**</span></span><br><span class="line"><span class="section">start_recursive_build:</span></span><br><span class="line">    make -C ./ -f <span class="variable">$(TOPDIR)</span>/Makefile.build</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 处理最终目标，把前期处理得出的 built-in.o 用上</span></span><br><span class="line"><span class="variable">$(TARGET)</span> : built-in.o</span><br><span class="line">    <span class="variable">$(CC)</span> -o <span class="variable">$(TARGET)</span> built-in.o <span class="variable">$(LDFLAGS)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 清理</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    rm -f <span class="variable">$(<span class="built_in">shell</span> find -name &quot;*.o&quot;)</span></span><br><span class="line">    rm -f <span class="variable">$(TARGET)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 彻底清理</span></span><br><span class="line"><span class="section">distclean:</span></span><br><span class="line">    rm -f <span class="variable">$(<span class="built_in">shell</span> find -name &quot;*.o&quot;)</span></span><br><span class="line">    rm -f <span class="variable">$(<span class="built_in">shell</span> find -name &quot;*.d&quot;)</span></span><br><span class="line">    rm -f <span class="variable">$(TARGET)</span></span><br></pre></td></tr></table></figure>

<p>makefile.build:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 伪目标</span></span><br><span class="line">PHONY := __build</span><br><span class="line"><span class="section">__build:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空需要的变量</span></span><br><span class="line">OBJS :=</span><br><span class="line">subdir-y :=</span><br><span class="line">EXTRA_CFLAGS :=</span><br><span class="line"></span><br><span class="line"><span class="comment"># 包含同级目录Makefile</span></span><br><span class="line"><span class="comment"># 这里要注意，相对路径为 执行本 Makefile.build 的路径</span></span><br><span class="line"><span class="keyword">include</span> Makefile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前 Makefile 需要编译的子目录的目录名</span></span><br><span class="line"><span class="comment"># obj-y := a.o b.o c/ d/</span></span><br><span class="line"><span class="comment"># $(filter %/, $(obj-y))   : c/ d/</span></span><br><span class="line"><span class="comment"># __subdir-y  : c/ d/</span></span><br><span class="line"><span class="comment"># subdir-y    : c d</span></span><br><span class="line">__subdir-y  := <span class="variable">$(<span class="built_in">patsubst</span> %/,%,$(<span class="built_in">filter</span> %/, <span class="variable">$(OBJS)</span>)</span>)</span><br><span class="line">subdir-y  += $(__subdir-y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把子目录的目标定为以下注释</span></span><br><span class="line"><span class="comment"># built-in.o d/built-in.o</span></span><br><span class="line">subdir_objs := <span class="variable">$(<span class="built_in">foreach</span> f,$(subdir-y)</span>,<span class="variable">$(f)</span>/built-in.o)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前目录需要编进程序的文件名作为，并写为目标</span></span><br><span class="line"><span class="comment"># a.o b.o</span></span><br><span class="line">cur_objs := <span class="variable">$(<span class="built_in">filter</span>-out %/, <span class="variable">$(OBJS)</span>)</span></span><br><span class="line"><span class="comment"># 使修改头文件 .h 后，重新make后可以重新编译（重要）</span></span><br><span class="line">dep_files := <span class="variable">$(<span class="built_in">foreach</span> f,<span class="variable">$(cur_objs)</span>,.<span class="variable">$(f)</span>.d)</span></span><br><span class="line"><span class="comment"># 列出存在的文件</span></span><br><span class="line">dep_files := <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(dep_files)</span>)</span></span><br><span class="line"><span class="comment">#不为空则把存在的依赖文件包含进来（依赖文件内容是是源文件-&gt;.o文件的依赖关系）</span></span><br><span class="line"><span class="keyword">ifneq</span> (<span class="variable">$(dep_files)</span>,)</span><br><span class="line">  <span class="keyword">include</span> <span class="variable">$(dep_files)</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PHONY += $(subdir-y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一个目标；依赖是子目录和built-in.o</span></span><br><span class="line">__build : $(subdir-y) built-in.o</span><br><span class="line"></span><br><span class="line"><span class="comment"># 优先编译 子目录的内容</span></span><br><span class="line"><span class="section">$(subdir-y):</span></span><br><span class="line">  make -C <span class="variable">$@</span> -f <span class="variable">$(TOPDIR)</span>/Makefile.build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 链接成 目标</span></span><br><span class="line">built-in.o : <span class="variable">$(cur_objs)</span> <span class="variable">$(subdir_objs)</span></span><br><span class="line">  <span class="variable">$(LD)</span> -r -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"></span><br><span class="line">dep_file = .<span class="variable">$@</span>.d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成 cur_objs 目标</span></span><br><span class="line">%.o : %.c</span><br><span class="line">  <span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> <span class="variable">$(EXTRA_CFLAGS)</span> $(CFLAGS_<span class="variable">$@</span>) -Wp,-MD,<span class="variable">$(dep_file)</span> -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span></span><br><span class="line">  </span><br><span class="line">.PHONY : <span class="variable">$(PHONY)</span></span><br></pre></td></tr></table></figure>

<p><strong>生成静态链接库</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">######################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">######################################</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#target you can change test to what you want</span></span><br><span class="line"><span class="comment">#共享库文件名，lib*.a</span></span><br><span class="line">TARGET  := libtest.a</span><br><span class="line">  </span><br><span class="line"><span class="comment">#compile and lib parameter</span></span><br><span class="line"><span class="comment">#编译参数</span></span><br><span class="line">CC      := gcc</span><br><span class="line">AR      = ar</span><br><span class="line">RANLIB  = ranlib</span><br><span class="line">LIBS    :=</span><br><span class="line">LDFLAGS :=</span><br><span class="line">DEFINES :=</span><br><span class="line">INCLUDE := -I.</span><br><span class="line">CFLAGS  := -g -Wall -O3 <span class="variable">$(DEFINES)</span> <span class="variable">$(INCLUDE)</span></span><br><span class="line">CXXFLAGS:= <span class="variable">$(CFLAGS)</span> -DHAVE_CONFIG_H</span><br><span class="line">  </span><br><span class="line"><span class="comment">#i think you should do anything here</span></span><br><span class="line"><span class="comment">#下面的基本上不需要做任何改动了</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#source file</span></span><br><span class="line"><span class="comment">#源文件，自动找所有.c和.cpp文件，并将目标定义为同名.o文件</span></span><br><span class="line">SOURCE  := <span class="variable">$(<span class="built_in">wildcard</span> *.c)</span> <span class="variable">$(<span class="built_in">wildcard</span> *.cpp)</span></span><br><span class="line">OBJS    := <span class="variable">$(<span class="built_in">patsubst</span> %.c,%.o,$(<span class="built_in">patsubst</span> %.cpp,%.o,<span class="variable">$(SOURCE)</span>)</span>)</span><br><span class="line">  </span><br><span class="line">.PHONY : everything objs clean veryclean rebuild</span><br><span class="line">  </span><br><span class="line">everything : <span class="variable">$(TARGET)</span></span><br><span class="line">  </span><br><span class="line">all : <span class="variable">$(TARGET)</span></span><br><span class="line">  </span><br><span class="line">objs : <span class="variable">$(OBJS)</span></span><br><span class="line">  </span><br><span class="line"><span class="section">rebuild: veryclean everything</span></span><br><span class="line">                </span><br><span class="line">clean :</span><br><span class="line">    rm -fr *.o</span><br><span class="line">    </span><br><span class="line">veryclean : clean</span><br><span class="line">    rm -fr <span class="variable">$(TARGET)</span></span><br><span class="line">  </span><br><span class="line"><span class="variable">$(TARGET)</span> : <span class="variable">$(OBJS)</span></span><br><span class="line">    <span class="variable">$(AR)</span> cru <span class="variable">$(TARGET)</span> <span class="variable">$(OBJS)</span></span><br><span class="line">    <span class="variable">$(RANLIB)</span> <span class="variable">$(TARGET)</span></span><br></pre></td></tr></table></figure>

<p><strong>生成动态链接库</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">######################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">######################################</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#target you can change test to what you want</span></span><br><span class="line"><span class="comment">#共享库文件名，lib*.so</span></span><br><span class="line">TARGET  := libtest.so</span><br><span class="line">  </span><br><span class="line"><span class="comment">#compile and lib parameter</span></span><br><span class="line"><span class="comment">#编译参数</span></span><br><span class="line">CC      := gcc</span><br><span class="line">LIBS    :=</span><br><span class="line">LDFLAGS :=</span><br><span class="line">DEFINES :=</span><br><span class="line">INCLUDE := -I.</span><br><span class="line">CFLAGS  := -g -Wall -O3 <span class="variable">$(DEFINES)</span> <span class="variable">$(INCLUDE)</span></span><br><span class="line">CXXFLAGS:= <span class="variable">$(CFLAGS)</span> -DHAVE_CONFIG_H</span><br><span class="line">SHARE   := -fPIC -shared -o</span><br><span class="line">  </span><br><span class="line"><span class="comment">#i think you should do anything here</span></span><br><span class="line"><span class="comment">#下面的基本上不需要做任何改动了</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#source file</span></span><br><span class="line"><span class="comment">#源文件，自动找所有.c和.cpp文件，并将目标定义为同名.o文件</span></span><br><span class="line">SOURCE  := <span class="variable">$(<span class="built_in">wildcard</span> *.c)</span> <span class="variable">$(<span class="built_in">wildcard</span> *.cpp)</span></span><br><span class="line">OBJS    := <span class="variable">$(<span class="built_in">patsubst</span> %.c,%.o,$(<span class="built_in">patsubst</span> %.cpp,%.o,<span class="variable">$(SOURCE)</span>)</span>)</span><br><span class="line">  </span><br><span class="line">.PHONY : everything objs clean veryclean rebuild</span><br><span class="line">  </span><br><span class="line">everything : <span class="variable">$(TARGET)</span></span><br><span class="line">  </span><br><span class="line">all : <span class="variable">$(TARGET)</span></span><br><span class="line">  </span><br><span class="line">objs : <span class="variable">$(OBJS)</span></span><br><span class="line">  </span><br><span class="line"><span class="section">rebuild: veryclean everything</span></span><br><span class="line">                </span><br><span class="line">clean :</span><br><span class="line">    rm -fr *.o</span><br><span class="line">    </span><br><span class="line">veryclean : clean</span><br><span class="line">    rm -fr <span class="variable">$(TARGET)</span></span><br><span class="line">  </span><br><span class="line"><span class="variable">$(TARGET)</span> : <span class="variable">$(OBJS)</span></span><br><span class="line">    <span class="variable">$(CC)</span> <span class="variable">$(CXXFLAGS)</span> <span class="variable">$(SHARE)</span> <span class="variable">$@</span> <span class="variable">$(OBJS)</span> <span class="variable">$(LDFLAGS)</span> <span class="variable">$(LIBS)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">src = <span class="variable">$(<span class="built_in">wildcard</span> *.c)</span>          <span class="comment">#生成.c依赖文件字符串流；找到当前目录下所有.c文件生成字符串流</span></span><br><span class="line"></span><br><span class="line">obj = <span class="variable">$(<span class="built_in">patsubst</span> %.c, %.o, <span class="variable">$(src)</span>)</span>                                  <span class="comment">#把.c字符串流变成.o字符串流</span></span><br><span class="line"></span><br><span class="line"><span class="section">ALL:math.out                                                        #指定构建树最终结果</span></span><br><span class="line"></span><br><span class="line">a.</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E8%BD%AF%E4%BB%B6/vi/vi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E8%BD%AF%E4%BB%B6/vi/vi/" class="post-title-link" itemprop="url">vi</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:15:56" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h2><p><img src="/image/image_mRZtTG7eZR.png"></p>
<p>vi file_name用vi编辑器打开或创建file_name文件<br>移动光标<br>【h、j、k、l】光标左、下、上、右<br>【ctrl+b】屏幕往”后”移动一页<br>【ctrl+f】屏幕往”前”移动一页</p>
<p>【G】 移动到文件最后一行<br>【gg】 移动到文件第一行<br>【n&lt;Enter&gt;】光标向下移动n行</p>
<p>【0】移动到本行首</p>
<p>【n&lt;space&gt;】光标右移n位</p>
<p>查找与替换<br>【&#x2F;word】 向下寻找word字符串<br>【?word】 向上寻找word字符串<br>【n】 代表重复前一个查找的动作<br>【N】 与n刚好相反，为【反向】进行行前一个查找动作</p>
<p>【:n1,n2s&#x2F;word1&#x2F;word2&#x2F;g】  n1与n2为数字，在第n1与n2行之间查找word1 这个字符串，并将该字符串替换为word2</p>
<p>【:1,$s&#x2F;word1&#x2F;word2&#x2F;gc】 从第一行到最后一行查找word1字符串，并将该字符串替换为word2 ，且在替换前提示用户确认是否进行替换</p>
<p>删除</p>
<p>【x】 为向后删除一个字符 (相当于【del】键)<br><strong>【X】 为向前删除一个字符(相当于【backspace】键)</strong></p>
<p>【dd】 删除光标所在行<br>【ndd】 删除光标所在的向下n行</p>
<p>复制</p>
<p>【yy】 复制光标所在的那一行<br>【nyy】 复制光标所在的向下n列</p>
<p>【y1G】 复制光标所在行到第一行的所有数据<br>【yG】 复制光标所在行到最后一行的所有数据</p>
<p>【y0】 复制光标所在的那个字符到该行行首的所有数据<br>【y$】 复制光标所在的那个字符到该行行尾的所有数据</p>
<p>粘贴</p>
<p>【p】将已复制的数据在光标下一行粘贴上</p>
<p>撤回</p>
<p>【u】 恢复前一个操作<br>【Ctrl+r】重做上一个操作</p>
<p>【.】 是重复前一个操作</p>
<p>【:w】 保存编辑的内容<br>【:w!】强制写入该文件，但跟你对该文件的权限有关<br>【:q!】 不想保存修改强制离开<br>【:wq】 强制写入并保存后离开<br>【:x】 保存后离开</p>
<p>【:w filename】 （另存为filename）<br>【:r filename】 在编辑的数据中，读入另一个文件的数据。即将filename这个文件的内容加到光标所在行后面。</p>
<p>【:n1,n2 w filename】 将n1到n2的内容保存成filename这个文件。<br>【:! command】暂时离开vi 到命令行模式下执行command的显示结果！例如 【:! ls &#x2F;home】即可在 vi 当中察看&#x2F;home底下以ls输出的文件信息！</p>
<p>【:set nu】 显示行号<br>【:set nonu】 与 set nu 相反，为取消行</p>
<p>o向下新增一行<br>————————————————</p>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E6%95%B0%E5%AD%A6/%E7%BA%BF%E6%80%A7%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%EF%BC%88%E4%BF%A1%E5%8F%B7%E4%B8%8E%E7%B3%BB%E7%BB%9F%EF%BC%89/%E7%B3%BB%E7%BB%9F%E8%BE%93%E5%85%A5%E4%BF%A1%E5%8F%B7/%E7%B3%BB%E7%BB%9F%E8%BE%93%E5%85%A5%E4%BF%A1%E5%8F%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E6%95%B0%E5%AD%A6/%E7%BA%BF%E6%80%A7%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%EF%BC%88%E4%BF%A1%E5%8F%B7%E4%B8%8E%E7%B3%BB%E7%BB%9F%EF%BC%89/%E7%B3%BB%E7%BB%9F%E8%BE%93%E5%85%A5%E4%BF%A1%E5%8F%B7/%E7%B3%BB%E7%BB%9F%E8%BE%93%E5%85%A5%E4%BF%A1%E5%8F%B7/" class="post-title-link" itemprop="url">系统输入信号</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:13:29" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/math/" itemprop="url" rel="index"><span itemprop="name">math</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>输入通常是时域上的一个函数$y&#x3D;x(t)$</p>
<h1 id="离散-连续信号"><a href="#离散-连续信号" class="headerlink" title="离散&#x2F;连续信号"></a>离散&#x2F;连续信号</h1><p>自变量t若是连续可变的:$y &#x3D; x(t)$<br>自变量n若是定义在离散的时刻点上:$y&#x3D;x[n]$</p>
<p><img src="/image/image_pKoQbsnVBT.png"></p>
<p><img src="/image/image_mnkWT0BFx4.png"></p>
<h1 id="信号能量-功率"><a href="#信号能量-功率" class="headerlink" title="信号能量&#x2F;功率"></a>信号能量&#x2F;功率</h1><p>$\begin{aligned}连续时间信号x(t);t\in[t_{1},t_{2}]\text{ 的总能量为}&amp;\int_{t_1}^{t_2}|x(t)|^2\mathrm{d}t\end{aligned}$（类比$ui&#x3D;u^2&#x2F;R$的积分，大都是这个形式）</p>
<p>$\begin{aligned}<br>离散时间信号x[n];n\in{n_1,…..n_2}\text{的总能量为}\sum_{n&#x3D;n_1}^|x[n]|^2<br>\end{aligned}$</p>
<p>能量的广义积分&#x2F;求和：$\begin{aligned}E_{\infty}&amp;\stackrel{\triangle}{&#x3D;}\lim_{T\to\infty}\int_{-T}^{T}|x(t)|^{2}\mathrm{d}t&#x3D;\int_{-\infty}^{+\infty}|x(t)|^{2}\mathrm{d}t\\E_{\infty}&amp;\stackrel{\triangle}{&#x3D;}\lim_{N\to\infty}\sum_{n&#x3D;-N}^{+N}|x[n]|^{2}&#x3D;\sum_{n&#x3D;-\infty}^{+\infty}|x[n]|^{2}\end{aligned}$；平均功率：$\begin{aligned}P_\infty\triangleq\lim_{T\to\infty}\frac1{2T}\int_{-T}^T|x(t)|^2\operatorname{d}t\\P_\infty\triangleq\lim_{N\to\infty}\frac1{2N+1}\sum_{n&#x3D;-N}^{+N}|x[n]|^2\end{aligned}$</p>
<h1 id="自变量变换"><a href="#自变量变换" class="headerlink" title="自变量变换"></a>自变量变换</h1><p>$y&#x3D;x(at-b)$<br>时移:$x(t-b)$；体现为信号的超前，滞后<br>反转：$x(-t$);录音带倒放是一个典型应用<br>时间尺度放缩：$x(at)$;倍速播放是典型应用</p>
<p>周期信号：$x(t)&#x3D;x(t+T)$;最小正值$T_0$称基波周期<br>奇偶信号(具备对称性)：$x(t)&#x3D;x(-t);x(t)&#x3D;-x(-t)$<br>任意函数f(x)都能拆分成两个对称函数的和：$f(x)&#x3D;\frac{A(x)+B(x)}{2}$$ A(x)&#x3D;f(x)+f(-x)\B(x)&#x3D;f(x)-f(-x)  $</p>
<p><img src="/image/image_jRg6RIm3Yd.png"></p>
<h1 id="典型信号"><a href="#典型信号" class="headerlink" title="典型信号"></a>典型信号</h1><h2 id="指数-x-t-C-mathrm-e-at"><a href="#指数-x-t-C-mathrm-e-at" class="headerlink" title="指数$x(t)&#x3D;C\mathrm{e}^{at}$"></a>指数$x(t)&#x3D;C\mathrm{e}^{at}$</h2><p>可这样分析$x(t)&#x3D;C\mathrm{e}^{at}$$  |e^{a}|&gt;1:指数发散 $or指数增长包络发散；<br>$|e^{a}|&#x3D;1:x(t)为常数or在+-C之间跳跃$；<br>$|e^{a}|&lt;1:指数收敛or包络收敛$</p>
<p>1）实指数：当a，C为实数；<br>$若a&gt;0:\mathrm{e}^{at}指数上升;<br>若a&lt;0:\mathrm{e}^{at}指数下降$</p>
<p><img src="/image/image_Pw7oDyXAw2.png"></p>
<p>2）虚指数:$a&#x3D;j\omega$;$x(t)&#x3D;Ce^{j\omega t}&#x3D;C[cos(\omega t)+jsin(\omega t)]$<br>很显然，它是周期函数；<br>$倒推其基波周期&#x2F;频率：若为周期函数 \-&gt;e^{j\omega t}&#x3D;e^{j\omega (t+T)}&#x3D;e^{j\omega t}\cdot e^{j\omega T} \&#x3D;&gt;e^{j\omega T}&#x3D;cos(\omega T)+jsin(\omega T)&#x3D;1\ &#x3D;&gt;T_{0}&#x3D;2\pi&#x2F;\omega$$e^{j-\omega t}$也是这样；故$\omega ≠0时：T_{0}&#x3D;2\pi&#x2F;|\omega|$$或只要T_0&gt;0:\omega&#x3D;2\pi T_0$</p>
<p>虚指数；天然的周期复指数通常用于作为信号的构成要素（谐波）</p>
<p>3）复指数$a&#x3D;r+j(\omega +\theta)$;<br>$x(t)&#x3D;Ce^{[r+j(\omega +\theta)] t}&#x3D;C\cdot e^{rt}[cos(j(\omega +\theta) t)+jsin(j(\omega +\theta) t) ]$<br>在电学中复指数是正弦信号的相量形式;<br>显然当$r&gt;0;x(t)是指数增长的包络正弦；r&lt;0;x(t)是指数衰减的包络正弦（阻尼衰减震荡）$</p>
<p><img src="/image/image_fXliCornrx.png"></p>
<p>离散复指数的周期性质：<br>1）对于$e^{j\omega t}，当\omega 变化，信号的震荡频率随之变化，周期也随之变化；但对于e^{j\omega n}：有$$e^{j（\omega +2k\pi）n}&#x3D;e^{j\omega n}\cdot [cos(2k\pi n)+jsin(2k\pi n)] &#x3D;e^{j\omega n}$;即对于离散信号,<strong>角频率变化</strong>$+-2k\pi$<strong>，周期不变化</strong>;即w不能是<br>2)$e^{j\omega (n+T)}&#x3D;e^{j\omega n}&#x3D;&gt;e^{j\omega T}&#x3D;1&#x3D;&gt;T&#x3D;2k\pi&#x2F;\omega$；且为了让T是个整数（如果T不是整数，那么移位后整数n点不一定落在上面），要保证$2\pi &#x2F;\omega$ 是有理数</p>
<p><img src="/image/image_do70bpQEls.png"></p>
<h2 id="正弦-x-t-A-cos-omega-0-t-phi"><a href="#正弦-x-t-A-cos-omega-0-t-phi" class="headerlink" title="正弦$x(t)&#x3D;A\cos(\omega_{0}t+\phi)$"></a>正弦$x(t)&#x3D;A\cos(\omega_{0}t+\phi)$</h2><p>根据欧拉关系：<br>$Acos(\omega t+\phi)&#x3D;\frac{A}{2}\cdot (e^{j(\omega t+\phi)}+ e^{-j(\omega t+\phi)})$$Asin(\omega t+\phi)&#x3D;\frac{A}{2}\cdot (e^{j(\omega t+\phi)}- e^{-j(\omega t+\phi)})$$A\cos(\omega_{0}t+\phi)&#x3D;ARe{\mathrm{e}^{\mathrm{j}(\omega_{0}t+\phi)}}$$A\sin(\omega_0t+\phi)&#x3D;AIm{\mathrm{e}^{\mathrm{j}(\omega_0t+\phi)}}$</p>
<h2 id="奇异函数"><a href="#奇异函数" class="headerlink" title="奇异函数"></a>奇异函数</h2><p>奇异函数拥有奇异点（不连续，不可导点）；不是黎曼可积的，其积分是广义积分（瑕积分）：$\int_a^bf(x)dx&#x3D;\lim_{\varepsilon\to0^+}(\int_a^{c-\varepsilon}f(x)dx+\int_{c+\varepsilon}^bf(x)dx+f(c)\cdot2\varepsilon)；C是瑕点$；<br>而奇异函数奇异点进行广义函数求导：<br>eg:计算单位阶跃函数的导数时，可以使用Dirac Delta函数来表示：$\frac d{dx}H(x)&#x3D;\frac d{dx}\left(\frac12+\frac12\mathrm{sgn}(x)\right)&#x3D;\frac d{dx}\left(\frac12\right)+\frac d{dx}\left(\frac12\mathrm{sgn}(x)\right)&#x3D;0+\frac12\frac d{dx}\mathrm{sgn}(x)$<br>其中，sgn(x)是符号函数，当$x&gt;0$时取值为1，当$x&lt;0$时取值为-1；<br>对于符号函数的导数，我们可以使用Dirac Delta函数的一般化微分来表示：$\frac d{dx}$sgn( x) &#x3D; $2\delta( x)$<br>因此，单位阶跃函数的导数可以表示为：$\frac d{dx}H(x)&#x3D;\frac12\frac d{dx}\mathrm{sgn}(x)&#x3D;\frac12\cdot2\delta(x)&#x3D;\delta(x)$</p>
<h3 id="单位冲激-单位脉冲"><a href="#单位冲激-单位脉冲" class="headerlink" title="单位冲激&#x2F;单位脉冲"></a>单位冲激&#x2F;单位脉冲</h3><p>整数域上的单位冲激序列$\left.\delta[n]&#x3D;\left{\begin{array}{ll}0,&amp;n\neq0\1,&amp;n&#x3D;0\end{array}\right.\right.$；离散脉冲序列是离散阶跃序列的一次差分$\delta[n]&#x3D;u[n]-u[n-1]$</p>
<p><img src="/image/image_2GJItgWvyu.png"></p>
<p>时域上的单位脉冲函数：$  \delta_\bigtriangleup(t)&#x3D;  {\begin{array}{ll}0,&amp;n\notin(0,1]\1,&amp;n\in(0,1]\end{array} $;单位脉冲函数是单位阶跃的一次差分函数$  \delta_\bigtriangleup(t)&#x3D; u(n)-u(n-1) $;标准单位脉冲宽，高，面积都是1</p>
<p><img src="/image/image_vkJXXMIWsb.png"></p>
<p>时域上的单位冲激函数：$\delta(t)&#x3D;\lim_{\Delta\to0}\delta_{\Delta}(t)$;单位冲激函数是单位阶跃函数的一阶微分$\delta(t)&#x3D;\frac{\mathrm{d}u(t)}{\mathrm{d}t}$；冲激强度1表示脉冲积分为1；<br>用卷积正式定义：$ x(t)&#x3D;x(t)<em>\delta(t)&#x3D;\delta(t)<em>x(t)&#x3D;\int_{-\infty}^{+\infty}\delta(\tau)x(t-\tau)\operatorname{d}\tau  $；**任何信号与单位冲激的卷积都&#x3D;信号本身</em></em></p>
<p><img src="/image/image_WzHwn-XK2b.png"></p>
<h3 id="单位阶跃"><a href="#单位阶跃" class="headerlink" title="单位阶跃"></a>单位阶跃</h3><p>整数域上的单位阶跃序列：$\left.u[n]&#x3D;\left{\begin{array}{ll}0,&amp;n&lt;0\1,&amp;n\geqslant0\end{array}\right.\right.$;离散阶跃序列是离散冲激序列的求和$u[n]&#x3D;\sum_{k&#x3D;0}^n\delta[n-k]$</p>
<p>时域上的单位阶跃函数：$\left.u(t)&#x3D;\left{\begin{array}{cc}0,&amp;t&lt;0\1,&amp;t&gt;0\end{array}\right.\right.$；阶跃函数是单位冲激函数的积分：$ u(t)&#x3D;\int_{-\infty}^{t}\delta(\tau)\operatorname{d}\tau  $</p>
<p><img src="/image/image_txKFhAxI5G.png"></p>
<p><img src="/image/image_yYSlXX0AO0.png"></p>
<h3 id="单位斜坡"><a href="#单位斜坡" class="headerlink" title="单位斜坡"></a>单位斜坡</h3>
      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zeinsshiri.github.io/2024/02/08/%E6%95%B0%E5%AD%A6/%E7%BA%BF%E6%80%A7%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%EF%BC%88%E4%BF%A1%E5%8F%B7%E4%B8%8E%E7%B3%BB%E7%BB%9F%EF%BC%89/%E7%BA%BF%E6%80%A7%E6%97%B6%E4%B8%8D%E5%8F%98%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E6%80%A7%E6%97%B6%E4%B8%8D%E5%8F%98%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zeins_XvJin_Shiri">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeins's Blog">
      <meta itemprop="description" content="在何处付出，便在何处收获">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zeins's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/08/%E6%95%B0%E5%AD%A6/%E7%BA%BF%E6%80%A7%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%EF%BC%88%E4%BF%A1%E5%8F%B7%E4%B8%8E%E7%B3%BB%E7%BB%9F%EF%BC%89/%E7%BA%BF%E6%80%A7%E6%97%B6%E4%B8%8D%E5%8F%98%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E6%80%A7%E6%97%B6%E4%B8%8D%E5%8F%98%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">线性时不变系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-02-08 16:00:06 / 修改时间：16:13:17" itemprop="dateCreated datePublished" datetime="2024-02-08T16:00:06+08:00">2024-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/math/" itemprop="url" rel="index"><span itemprop="name">math</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>输入可表示为<strong>各点值（或微元）与单位冲激的线性组合</strong>（卷积）</p>
<h1 id="离散线性时不变系统求和：卷积和"><a href="#离散线性时不变系统求和：卷积和" class="headerlink" title="离散线性时不变系统求和：卷积和"></a>离散线性时不变系统求和：卷积和</h1><p>单个离散信号可由单位冲激序列表示：$ x[k]&#x3D; x[k]\cdot\delta[n-k]  $<br>离散输入序列可用卷积和表示$x[n]&#x3D;\sum_{k&#x3D;-\infty}^{+\infty}x[k]\delta[n-k]$;由于线性时不变<br>离散输出序列的卷积和：$y[n]&#x3D;\sum_{k&#x3D;-\infty}^{+\infty}x[k]h[n-k]:&#x3D;x[n]*h[n]$;输入与单位冲激响应的卷积</p>
<h1 id="连续线性时不变系统积分：卷积积分"><a href="#连续线性时不变系统积分：卷积积分" class="headerlink" title="连续线性时不变系统积分：卷积积分"></a>连续线性时不变系统积分：卷积积分</h1><p>对连续函数无穷个点求和必引发悖论；尝试对脉冲微元求和取极限表示这个信号函数：$\delta_\Delta(t-k\Delta)$筛出微元$\delta_k$范围内的高</p>
<p><img src="/image/image_PZ8oksCIM1.png"></p>
<p>$ x(t)&#x3D;\lim_{ \bigtriangleup  \to 0} \sum_{k&#x3D;-\infty}^{+\infty} x(k\Delta)\Delta \cdot\delta_\Delta(t-k\Delta)&#x3D;\int\limits_{-\infty}^{+\infty} x(\tau)\delta(t-\tau)d\tau  $$y(t)&#x3D;\lim_{ \bigtriangleup  \to 0} \sum_{k&#x3D;-\infty}^{+\infty} x(k\Delta)\Delta \cdot h (t-k\Delta)&#x3D;\int\limits_{-\infty}^{+\infty} x(\tau)h(t-\tau)d\tau:&#x3D;x(t)* h(t)$</p>
<h1 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h1><p>1）卷积交换律</p>
<p><img src="/image/image_J0YGlps6Di.png"></p>
<p><img src="/image/image_fOTL8cecI-.png"></p>
<p>2）卷积结合律：反映了并联系统转换</p>
<p><img src="/image/image_cigZueb9lm.png"></p>
<p><img src="/image/image_qTgkxG-h-C.png"></p>
<p>3）卷积分配律：反应串联转换<br>因果性：</p>
<p><img src="/image/image_OzhkXZcURU.png"></p>
<p><img src="/image/image_2WsphA4Yx7.png"></p>
<p><img src="/image/image_ZMpADX_nby.png"></p>
<p>4）无记忆性：系统任意时刻输出只取决于当前时刻输入；<br>离散时间线性时不变系统$y[n]&#x3D;\sum_{k&#x3D;-\infty}^{+\infty}x[k]h[n-k]:&#x3D;x[n]*h[n]$,能使其满足无记忆的只有：$筛出x[n]项$；<br>$即k≠n时；h[n-k]≠h[0]时：h[n-k]&#x3D;f(\delta (n-k))&#x3D;0;$$k&#x3D;n时；h[0]&#x3D;f(\delta (0))&#x3D;K\delta(0)$$把x[n]项筛出$;<br>综上：$h(n)&#x3D;K\delta (n)$时；当n不为0，响应为0；当n&#x3D;0,把系数筛出<br>5)可逆性：$x(t)*h(t)*h^{-1}(t)&#x3D;x(t)⇒h(t)*h^{-1}(t)&#x3D;\delta (t)$;筛出每一点再求和还是原来的函数<br>6)因果（不可预测）系统：系统任意时刻输出y(t)取决于现在或以往时刻的输入；对于线性时不变系统；只要将卷积式$x(k≤t)$的项筛出；即当$k&gt;t:h[n-k]&#x3D;0⇒h[n-k]&#x3D;Ku[-(n-t)]$<br>7）稳定性：当$x(t)≤A$;$y(t)&#x3D;x(t)*h(t)也要有界$：则必须满足：<br>$\begin{aligned}|y(t)|&amp;&#x3D;\left|\int_{-\infty}^{+\infty}x(\tau)h(t-\tau)\mathrm{d}\tau\right|\\&amp;\leqslant\int_{-\infty}^{+\infty}|x(\tau)||h(t-\tau)|\mathrm{d}\tau\\&amp;\leqslant B\int_{-\infty}^{+\infty}|h(t-\tau)|\mathrm{d}\tau&lt;\infty \end{aligned}$</p>
<h1 id="因果性时不变系统数学表示"><a href="#因果性时不变系统数学表示" class="headerlink" title="因果性时不变系统数学表示"></a>因果性时不变系统数学表示</h1><p>连续系统约束形式通常为 N 阶线性常系数微分方程： $\sum_{k&#x3D;0}^Na_k\frac{\mathrm{d}^ky(t)}{\mathrm{d}t^k}&#x3D;\sum_{k&#x3D;0}^Mb_k\frac{\mathrm{d}^kx(t)}{\mathrm{d}t^k}$; 左边是 y 对 t 的微分式，左边是 $f(t)$, 故可应用<a target="_blank" rel="noopener" href="https://www.wolai.com/obTkJRP6HRtsCTYZXeWbdf" title="微分方程">微分方程</a> 的结论；<br>为何一定是常系数：设$x(t)$的响应是$y(t),a_k(t)$ 为常系数时上述等号才成立；<br>为何是时不变： 其解的构造比如说为 $y&#x3D;Ae^{\alpha t}+Be^{\beta t}+Cf(t)$ ;<br>1)当$t&lt;0^+$时0输入：$\left{\begin{array}{ll}&amp;y(0^+)&#x3D;A+B\&amp;y(+\infty)&#x3D;Cf(+\infty)\end{array}\right. .&#x3D;&gt;y&#x3D;e^t(Ae^{\alpha}+$$Be^\beta)+\frac{y(+\infty)}{f(+\infty)}f(t)$<br>2)当$t&lt;0^+$时0状态：$\left{\begin{array}{ll}y(0^+)&#x3D;0&#x3D;A+B+Cf(0^+)\y(+\infty)&#x3D;Cf(+\infty)\end{array}\right .&#x3D;&gt;y&#x3D;$$e^t(Ae^\alpha+Be^\beta)+\frac{y(+\infty)}{f(+\infty)}f(t)$ ;<br>初始松弛状态下： $y(t)&#x3D;A(e^\alpha-e^\beta)e^t+$$\frac{y(+\infty)}{f(+\infty)}f(t)$ ;又因为 $x(t)&#x3D;\int_{-\infty}^{+\infty}x(\tau)\delta(t-\tau)d\tau$ ; 以M&#x3D;1为例⇒$f(t)&#x3D;x(\tau)\delta(t-\tau)d\tau$:<br>$y(\tau)&#x3D;C_1e^{\tau}+C_2 x(\tau)$$y(\tau ≠t)&#x3D;C_1e^{t}$<br>显然是个时不变系统</p>
<p><img src="/image/image_M_LBk-ZuMZ.png"></p>
<p>离散系统约束形式为N阶线性常系数差分方程：$\sum_{k&#x3D;0}^Na_ky[n-k]&#x3D;\sum_{k&#x3D;0}^Mb_kx[n-k]$<a target="_blank" rel="noopener" href="https://www.wolai.com/3x3TtF7yvPKh4UQGKBmTC8" title="差分方程">差分方程</a><br>通过观察，这个差分方程可以写成这样：$y[n]&#x3D;\frac{1}{a_{0}}\left (\sum_{k&#x3D;0}^{M}b_{k}x[n-k]-\sum_{k&#x3D;1}^{N}a_{k}y[n-k]\right)$;很显然这是一个因果系统；其当前输出取决于当前和以往输入和以往输出，形成一种递归树的结构（因此是递归方程）；<br>卷积和且松弛条件下：$y[n]&#x3D;\frac{1}{a_{0}}\left (\sum_{k&#x3D;0}^{M}b_{k}\delta[n-k]-\sum_{k&#x3D;1}^{N}a_{k}h[n-k]\right)$:<br>$y[0]&#x3D;\frac{b_0}{a_0}$$y[1]&#x3D;\frac{b_1-b_0}{a_0}$$y[n]&#x3D;\frac{1}{a_0}(b_n\delta[n-k]-\sum_{k&#x3D;1}^{n-1} a_kh[n-k])$&#x3D;$\frac{1}{a_0}(x[n]-\sum_{i&#x3D;0}^{n-1} y[i] )$<br>显然在松弛条件下是因果时不变的</p>
<h1 id="周期函数输入LTI系统的响应"><a href="#周期函数输入LTI系统的响应" class="headerlink" title="周期函数输入LTI系统的响应"></a>周期函数输入LTI系统的响应</h1><p><a target="_blank" rel="noopener" href="https://www.wolai.com/kmtG2gVsCfVfhfBbhDMXF9" title="傅里叶分析">傅里叶分析</a>周期为T的函数x(t)&#x3D;$\frac{a’<em>{0}}{2}+\sum</em>{n&#x3D;1}^{+\infty}(a_{n}\cos n\frac{2\pi}{T}t+b_{n}\sin n\frac{2\pi}{T}t)$&#x3D;$\sum_{n&#x3D;-\infty}^{+\infty}C_ne^{jn\frac{2\pi}{T}t}$<br>频谱系数：{$C_k$}:<br>1)$a’<em>0&#x2F;2$&#x3D;$ \frac{1}{2T}\int</em>{0}^{T} x(t)dt  $<br>2)$a_n&#x3D;\frac{1}{T}\int_{0}^{T} x(t)cosn\frac{2\pi}{T}tdt$<br>3)$b_n&#x3D;\frac{1}{T}\int_{0}^{T} x(t)sinn\frac{2\pi}{T}tdt$<br>4)$C_n&#x3D;\frac{1}{T}\int_{0}^{T} x(t)e^{-jn\frac{2\pi}{T}t}dt$<br>可见周期函数可表示为 无穷个 整数倍谐波频率$n\omega$ 指数函数的线性组合；&#x20;<br>又LTI系统中：输出函数是输入函数与单位冲激响应的卷积：<br>y(t)&#x3D;$x(t)*h(t)$&#x3D;$\int_{-\infty}^{+\infty } h(\tau)x(t-\tau)d\tau$$&#x3D;\int_{-\infty}^{+\infty }h(\tau)\sum_{n&#x3D;-\infty}^{+\infty}C_ne^{jn\frac{2\pi}{T}(t-\tau)}d\tau<br>&#x3D;\sum_{n&#x3D;-\infty}^{+\infty}C_ne^{jn\frac{2\pi}{T} t}\int_{-\infty}^{+\infty }h(\tau)e^{-jn\frac{2\pi}{T}\tau}d\tau&#x3D;\sum_{n&#x3D;-\infty}^{+\infty}C_ne^{jn\frac{2\pi}{T} t}H(s)$<br>满足线性时不变性；<br>其中H(s)是单位冲激响应的拉氏变换；$e^{jn\frac{2\pi}{T} t}H(s)$是是指数信号$e^{jn\frac{2\pi}{T} t}$的响应</p>

      
    </div>

    
    
    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2024-02 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Zeins_XvJin_Shiri</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">330k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">5:01</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">
    <!--由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动 -->
  </div>

<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("03/01/2023 10:00:00"); //此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒.";
    }
setInterval("createtime()",250);
</script>
    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/zeinsshiri/" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"mhchem":false,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script src="/js/third-party/comments/livere.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  

  
  
    <script src="/js/cursor/fireworks.js"></script>
  

  
  
<style>
#selectionCopyright {
    position: absolute;
    display: none;
    background: rgba(244,67,54,.7);
    color: #fff;
    border-radius: 6px;
    box-shadow: none;
    border: none;
    font-size: 14px;
}
#selectionCopyright a{
    color:#fff;
    border-color: #fff;
}
#selectionCopyright::before {
    content: "";
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 6px 8px 6px 0;
    border-color: transparent rgba(244,67,54,.7) transparent transparent;
    position: absolute;
    left: -8px;
    top:50%;
    transform:translateY(-50%);
}
</style>

<button id="selectionCopyright" disabled="disabled">本文由Zeins原创并遵循CC4.0，转载请注明出处并链接回原文地址哟</button>

<script>
window.onload = function() {
    function selectText() {
        if (document.selection) { //IE浏览器下
            return document.selection.createRange().text; //返回选中的文字
        } else { //非IE浏览器下
            return window.getSelection().toString(); //返回选中的文字
        }
    }
    var content = document.getElementsByTagName("body")[0];
    var scTip = document.getElementById('selectionCopyright');

    content.onmouseup = function(ev) { //设定一个onmouseup事件
        var ev = ev || window.event;
        var left = ev.clientX;//获取鼠标相对浏览器可视区域左上角水平距离距离
        var top = ev.clientY;//获取鼠标相对浏览器可视区域左上角垂直距离距离
        var xScroll = Math.max(document.body.scrollLeft, document.documentElement.scrollLeft);//获取文档水平滚动距离
        var yScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop);//获取文档垂直滚动距离
        if (selectText().length > 0) {
            setTimeout(function() { //设定一个定时器
                scTip.style.display = 'inline-block';
                scTip.style.left = left + xScroll + 15 + 'px';//鼠标当前x值
                scTip.style.top = top + yScroll - 15 + 'px';//鼠标当前y值
            }, 100);
        } else {
            scTip.style.display = 'none';
        }
    };

    content.onclick = function(ev) {
        var ev = ev || window.event;
        ev.cancelBubble = true;
    };
    document.onclick = function() {
        scTip.style.display = 'none';
    };
};
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":290},"mobile":{"show":false},"react":{"opacityDefault":1,"opacityOnHover":1},"log":false,"tagMode":false});</script></body>
</html>


